<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Đánh giá sản phẩm</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .rating {
            display: flex;
            flex-direction: row-reverse;
            justify-content: center;
            gap: 10px;
            max-height: 30px;
        }

        .rating input {
            display: none;
        }

        .rating label {
            font-size: 3rem;
            color: #ccc;
            cursor: pointer;
            transition: color 0.3s;
        }

        .rating input:checked ~ label,
        .rating label:hover,
        .rating label:hover ~ label {
            color: #FFD700;
        }

        .card-review {
            max-width: 700px;
            margin: 0 auto;
        }


    </style>
</head>
<body>

<div th:fragment="danhgia(sanPham, danhGiaList)" class="container mt-5">
    <div class="card card-review shadow p-4">
        <h4 class="text-center mb-4">Đánh giá sản phẩm</h4>

        <form th:action="@{/san-pham/them}" method="post">
            <input type="hidden" name="idSanPham" th:value="${sanPham.id}" />

            <!-- Chọn sao -->
            <div class="mb-4 text-center">
                <label class="form-label d-block" style="color: #0d0d0d">Chọn số sao:</label>
                <div class="rating">
                    <input type="radio" name="soSao" value="5" id="star5" required>
                    <label for="star5">★</label>
                    <input type="radio" name="soSao" value="4" id="star4">
                    <label for="star4">★</label>
                    <input type="radio" name="soSao" value="3" id="star3">
                    <label for="star3">★</label>
                    <input type="radio" name="soSao" value="2" id="star2">
                    <label for="star2">★</label>
                    <input type="radio" name="soSao" value="1" id="star1">
                    <label for="star1">★</label>
                </div>
            </div>

            <!-- Bình luận -->
            <div class="mb-3">
                <label for="binhLuan" class="form-label" style="color: #0d0d0d">Bình luận của bạn</label>
                <textarea class="form-control" name="binhLuan" id="binhLuan" rows="3" placeholder="Viết cảm nhận..."></textarea>
            </div>

            <div class="text-center">
                <button type="submit" class="btn btn-primary px-4">Gửi đánh giá</button>
            </div>
        </form>
    </div>

    <!-- Danh sách đánh giá -->
    <div class="mt-5">
        <h4 class="text-center mb-3">Đánh giá của khách hàng</h4>

        <div th:each="danhGia : ${danhGiaList}" class="border p-3 mb-3 rounded shadow-sm mx-auto" style="max-width: 700px;">
            <div class="d-flex justify-content-between">
                <div>
                    <strong th:text="${danhGia.khachHang.tenKh}">Tên khách</strong>
                    <span class="text-muted ms-2"
                          th:text="${#temporals.format(danhGia.thoiGian, 'dd/MM/yyyy HH:mm')}">Ngày</span>
                </div>
                <div>
                    <span th:each="i : ${#numbers.sequence(1, 5)}"
                          th:classappend="${i <= danhGia.soSao} ? 'text-warning' : 'text-muted'">★</span>
                </div>
            </div>
            <p th:text="${danhGia.binhLuan}">Bình luận</p>
        </div>
    </div>
</div>

</body>
</html>
