<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<style>
    input[type="radio"][disabled] {
        opacity: 1 !important;
        pointer-events: none;
    }

    input[type="radio"][disabled] + label {
        opacity: 1 !important;
        color: #000 !important;
        cursor: default;
        pointer-events: none;
    }

    .progress-tracker-horizontal {
        position: relative;
        display: flex;
        justify-content: space-between;
        align-items: center;
        width: 100%;
        max-width: 1000px;
        margin: 40px auto;
        padding: 0;
    }

    .progress-tracker-horizontal::before {
        content: '';
        position: absolute;
        top: 20px;
        left: 0;
        right: 0;
        height: 4px;
        background-color: #ccc;
        z-index: 0;
        border-radius: 2px;
    }

    .progress-line {
        position: absolute;
        top: 20px;
        left: 0;
        height: 4px;
        background-color: #28a745;
        z-index: 1;
        border-radius: 2px;
        transition: width 0.4s ease;
    }

    .step-item {
        position: relative;
        text-align: center;
        flex: 1;
        z-index: 2;
        padding: 0 4px;
    }

    .step-circle {
        width: 40px;
        height: 40px;
        background-color: #ccc;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto;
    }

    .step-circle i {
        font-size: 18px;
        color: white;
    }

    .step-label {
        margin-top: 8px;
        font-size: 13px;
        color: #333;
    }

    .step-item.completed .step-circle {
        background-color: #28a745;
    }

    .step-item.active .step-circle {
        background-color: #007bff;
        transform: scale(1.2);
        box-shadow: 0 0 10px rgba(0, 123, 255, 0.6);
    }

    .step-item.cancelled .step-circle {
        background-color: red;
    }

    .step-item.greyed .step-circle {
        background-color: #aaa;
    }

    html, body {
        height: 100%;
        margin: 0;
    }

    .wrapper {
        min-height: 100%;
        display: flex;
        flex-direction: column;
    }

    .content-wrapper {
        flex: 1;
    }

    .main-footer {
        width: 100%;
    }
</style>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

<!-- Mirrored from adminlte.io/themes/AdminLTE/index.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 May 2025 17:35:24 GMT -->
<body class="hold-transition skin-blue sidebar-mini">
<!-- Bootstrap 3.3.7 CDN (chuẩn cho AdminLTE 2) -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha512-NhP3VK08X1Z0lEV9CqM8czUfa8sC5qjGkUY+IWoqZsGEZCRQ2LjOBgWhHPuVLDxN+mMS0mH4oqeX0vc+Gd3gxA==" crossorigin="anonymous" referrerpolicy="no-referrer" />




<div class="wrapper">

    <head th:replace="~{ViewSanPham/layout/head :: head}"></head>

    <header th:replace="~{ViewSanPham/layout/header :: header}" ></header>
    <!-- Left side column. contains the logo and sidebar -->

    <aside th:replace="~{ViewSanPham/layout/aside :: aside}" ></aside>
    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper">
        <!-- Content Header (Page header) -->
        <section class="content-header">
            <h1>
                Trang Quản Trị Admin Bán Áo Phông
                <small>Hóa Đơn Chi Tiết</small>
            </h1>
            <ol class="breadcrumb">
                <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
                <li class="active">Dashboard</li>
            </ol>
        </section>

        <!-- Main content -->

        <div class="col-xs-12">
            <div class="box">

                <!-- Nền thanh tiến trình -->
                <div class="container mt-4">
                    <h4>Trạng thái đơn hàng</h4>

                    <div class="progress-tracker-horizontal">

                        <!-- Đường kẻ xanh chạy tới trạng thái hiện tại, trừ khi đã bị hủy -->
                        <div th:if="${hoaDon.trangThaiDonHang.name() != 'DA_HUY'}"
                             th:with="widthPercent=(${hoaDon.trangThaiDonHang.ordinal()} * 100.0) / (${#lists.size(steps) - 2})"
                             th:style="'width:' + widthPercent + '%'"
                             class="progress-line">
                        </div>



                        <!-- Các bước -->
                        <div class="step-item"
                             th:each="step, iterStat : ${steps}"
                             th:with="
                isCancelled=${hoaDon.trangThaiDonHang.name() == 'DA_HUY'},
                iconClass=
                    ${step.name() == 'CHO_XAC_NHAN'     ? 'fas fa-hourglass-start' :
                      step.name() == 'DA_XAC_NHAN'      ? 'fas fa-check' :
                      step.name() == 'DANG_DONG_GOI'    ? 'fas fa-box' :
                      step.name() == 'DANG_VAN_CHUYEN'  ? 'fas fa-truck' :
                      step.name() == 'DA_GIAO'          ? 'fas fa-house' :
                      step.name() == 'DA_HOAN_THANH'    ? 'fas fa-circle-check' :
                      step.name() == 'DA_HUY'           ? 'fas fa-circle-xmark' : ''}"
                             th:classappend="
                ${isCancelled} ?
                    ${step.name() == 'DA_HUY' ? 'cancelled' : 'greyed'} :
                    ${iterStat.index < hoaDon.trangThaiDonHang.ordinal() ? 'completed' :
                      step.name() == hoaDon.trangThaiDonHang.name() ? 'active' : ''}">

                            <div class="step-circle">
                                <i th:class="${iconClass}"></i>
                            </div>
                            <div class="step-label" th:text="${step.moTa}"></div>
                        </div>
                    </div>
                </div>






                <div class="container mt-4">
                    <form th:action="@{'/hoa-don/cap-nhat-trang-thai/' + ${hoaDon.id}}" method="post" class="form-inline"
                          onsubmit="return confirm('Chuyển trạng thái đơn hàng sang bước tiếp theo?');">
                        <button type="submit"
                                class="btn btn-primary ms-2"
                                th:disabled="${hoaDon.trangThaiDonHang.name() == 'DA_HOAN_THANH' or hoaDon.trangThaiDonHang.name() == 'DA_HUY'}">
                            Trạng thái tiếp theo
                        </button>
                    </form>
                </div>






                <div class="container mt-4">
                    <div class="card shadow">
                        <div class="card-body">
                            <h4 class="mb-3">Chi tiết hóa đơn</h4>
                            <table class="table table-bordered">
                                <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>ID Hóa đơn</th>
                                    <th>Mã CTHD</th>
                                    <th>Tên sản phẩm</th>
                                    <th>Đơn giá</th>
                                    <th>Số lượng</th>
                                    <th>Thành tiền</th>
                                    <th>Trạng thái</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr th:each="ctItem : ${ct}">
                                    <td th:text="${ctItem.id}">1</td>
                                    <td th:text="${ctItem.idHoaDon}">1001</td>
                                    <td th:text="${ctItem.maHdct}">CTHD001</td>
                                    <td th:text="${ctItem.tenSanPham}">iPhone 15</td>
                                    <td th:text="${#numbers.formatDecimal(ctItem.donGia, 0, 'COMMA', 1, 'POINT')} + ' ₫'">12,000 ₫</td>
                                    <td th:text="${ctItem.soLuong}">2</td>
                                    <td th:text="${#numbers.formatDecimal(ctItem.thanhTien, 0, 'COMMA', 1, 'POINT')} + ' ₫'">24,000 ₫</td>
                                    <td>
                                        <span th:if="${ctItem.trangThai == 1}" class="badge bg-success">Đã thanh toán</span>
                                        <span th:if="${ctItem.trangThai == 0}" class="badge bg-warning text-dark">Chưa thanh toán</span>
                                    </td>
                                </tr>
                                </tbody>
                            </table>

                            <div class="text-end mt-3">
                                <a th:href="@{/hoa-don/hien-thi}" class="btn btn-secondary">Quay lại</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>



        <!-- /.content -->
    </div>
    <!-- /.content-wrapper -->
    <footer class="main-footer">
        <div class="pull-right hidden-xs">
            <b>Version</b> 2.4.13
        </div>
        <strong>Copyright &copy; 2014-2019 <a href="https://adminlte.io/">AdminLTE</a>.</strong> All rights
        reserved.
    </footer>
</div>

<script>
    const input = document.getElementById('imageURLInput');
    const preview = document.getElementById('imagePreview');

    input.addEventListener('input', () => {
        const url = input.value;
        if (url) {
            preview.src = url;
            preview.style.display = 'block';
        } else {
            preview.src = '';
            preview.style.display = 'none';
        }
    });
</script>
<!-- ./wrapper -->

<!-- jQuery 3 -->
<script data-cfasync="false" src="../../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script>
<script th:src="@{/assets/bower_components/jquery/dist/jquery.min.js}"></script>
<!-- jQuery UI 1.11.4 -->
<script th:src="@{/bower_components/jquery-ui/jquery-ui.min.js}"></script>
<!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
<script>
    $.widget.bridge('uibutton', $.ui.button);
</script>
<!-- Bootstrap 3.3.7 -->
<script th:src="@{/assets/bower_components/bootstrap/dist/js/bootstrap.min.js}"></script>
<!-- Morris.js charts -->
<script th:src="@{/assets/bower_components/raphael/raphael.min.js}"></script>
<script th:src="@{/assets/bower_components/morris.js/morris.min.js}"></script>
<!-- Sparkline -->
<script src="bower_components/jquery-sparkline/dist/jquery.sparkline.min.js"></script>
<!-- jvectormap -->
<script th:src="@{/assets/plugins/jvectormap/jquery-jvectormap-1.2.2.min.js}"></script>
<script th:src="@{/assets/plugins/jvectormap/jquery-jvectormap-world-mill-en.js}"></script>
<!-- jQuery Knob Chart -->
<script th:src="@{/assets/bower_components/jquery-knob/dist/jquery.knob.min.js}"></script>
<!-- daterangepicker -->
<script th:src="@{/assets/bower_components/moment/min/moment.min.js}"></script>
<script th:src="@{/assets/bower_components/bootstrap-daterangepicker/daterangepicker.js}"></script>
<!-- datepicker -->
<script th:src="@{/assets/bower_components/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js}"></script>
<!-- Bootstrap WYSIHTML5 -->
<script th:src="@{/assets/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js}"></script>
<!-- Slimscroll -->
<script th:src="@{/assets/bower_components/jquery-slimscroll/jquery.slimscroll.min.js}"></script>
<!-- FastClick -->
<script th:src="@{/assets/bower_components/fastclick/lib/fastclick.js}"></script>
<!-- AdminLTE App -->
<script th:src="@{/assets/dist/js/adminlte.min.js}"></script>
<!-- AdminLTE dashboard demo (This is only for demo purposes) -->
<script th:src="@{/assets/dist/js/pages/dashboard.js}"></script>
<!-- AdminLTE for demo purposes -->
<script th:src="@{/assets/dist/js/demo.js}"></script>
<script th:src="@{/assets/ad.js}"></script>
<script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"rayId":"941d2071ef3dfd9f","version":"2025.4.0-1-g37f21b1","serverTiming":{"name":{"cfExtPri":true,"cfL4":true,"cfSpeedBrain":true,"cfCacheStatus":true}},"token":"2437d112162f4ec4b63c3ca0eb38fb20","b":1}' crossorigin="anonymous"></script>
</body>

<!-- Mirrored from adminlte.io/themes/AdminLTE/index.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 18 May 2025 17:35:27 GMT -->
</html>
